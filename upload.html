<html>
  <head>  
    <script>
      function uploading() {
        document.getElementById('uploading').style.display = 'block';
        document.getElementById('theform').style.display = 'none';
      }
      function getUrlVars() {
        var vars = {};
        var parts = window.location.href.replace(/[?&]+([^=&]+)=([^&]*)/gi, function(m,key,value) {
            vars[key] = value;
        });
        return vars;
      }
    </script>
  </head>
  <body>
    <form enctype="multipart/form-data" action="upload.php" method="post" id="theform">
      <input name="promela-file" type="file" />
      <input id="token" name="token" type="hidden" />
      <input value="upload" name="action" type="hidden" />
      <input type="submit" onclick="uploading()" value="Upload" />
    </form>
    <div id="uploading" style="display: none">
      Uploading file...
    </div>
    <script>
      var token = getUrlVars()['token'];
      document.getElementById('token').value = token;
    </script>
  </body>
</html>
